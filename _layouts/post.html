---
layout: default
---

<nav class="toc" id="toc"></nav>

<article class="post">
  <h1>{{ page.title }}</h1>

  <div class="entry">
    {{ content }}
  </div>

  <div class="date">
    Written on {{ page.date | date: "%B %e, %Y" }}
  </div>
  <div class="tags">
    Tags: 
    {% if page.tags %}
    {% for tag in page.tags %}
      <a href="{{ site.baseurl }}{{ site.tag_page }}#{{ tag | slugify }}" class="post-tag">{{ tag }}</a>
    {% endfor %}
    {% endif %}
  </div>
  <div class="categories">
    Filed under
    {% if page.categories %}
    {% for tag in page.categories %}
      <a href="{{ site.baseurl }}{{ site.category_page }}#{{ tag | slugify }}" class="post-category">{{ tag }}</a>
    {% endfor %}
    {% endif %}
  </div>

  {% include disqus.html %}
</article>

<script>
(function() {
  const toc = document.getElementById('toc');
  const headings = document.querySelectorAll('.entry h2, .entry h3');

  if (headings.length < 2) {
    toc.style.display = 'none';
    return;
  }

  const ul = document.createElement('ul');
  headings.forEach(h => {
    if (!h.id) return;
    const li = document.createElement('li');
    li.className = h.tagName.toLowerCase();
    const a = document.createElement('a');
    a.href = '#' + h.id;
    a.textContent = h.textContent;
    li.appendChild(a);
    ul.appendChild(li);
  });
  toc.appendChild(ul);

  // Highlight current section on scroll
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      const id = entry.target.id;
      const link = toc.querySelector(`a[href="#${id}"]`);
      if (link) {
        if (entry.isIntersecting) {
          toc.querySelectorAll('a').forEach(a => a.classList.remove('active'));
          link.classList.add('active');
        }
      }
    });
  }, { rootMargin: '-20% 0px -80% 0px' });

  headings.forEach(h => observer.observe(h));
})();
</script>
